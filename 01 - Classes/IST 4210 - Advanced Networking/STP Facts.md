2024/10/08 22:43
Status: #idea
Tags: [[Spanning Tree Protocol]]

# STP Facts

The Spanning Tree Protocol (STP), also referred to as the spanning tree algorithm (STA), assigns a designated bridge (or switch) for each route. Only the designated bridge can forward packets. Redundant bridges (and switches) are assigned as backups.

Keep in mind the following regarding STP:

- The spanning tree algorithm calculates the best loop-free path through a network by assigning a role to each bridge, switch, and port.
- The bridge role determines how each device functions in relation to other devices and whether the device forwards traffic to other segments.
- The network can respond to a lost link by building a new spanning tree.

The following table describes integral components of STP.

| STP                           | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| ----------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Switching forward logic       | Switching forward logic is implemented as follows:<br><br>- The source VLAN of the frame is determined, using the access interface's VLAN or the frame's trunking header.<br>- The source MAC address, source interface ID, and the VLAN ID are added to the MAC address table.<br>- The MAC address table is searched for the destination MAC address of the frame.<br>- The frame is forwarded to the interface of the matched address entry. If the MAC address is not found in the MAC address table, the frame is flooded out to other access ports in the same VLAN.                                                                                                                                                                                                                                                                                                                                                                                             |
| Forwarding state              | Criteria for putting an interface into a forwarding state is as follows:<br><br>- STP elects a root switch and all interfaces on the root switch are in a forwarding state.<br>- On non-root switches, the port with the least administrative cost between the switch and the root switch is elected to the forwarding state.<br>- The switch with the lowest root cost, compared with other switches, is also placed in the forwarding state.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| Bridge ID                     | The bridge ID (BID) is composed of the priority number of the host and its MAC address. A _hello packet_ is the most common Bridge Protocol Data Unit (BPDU). Hello packets contain the root bridge ID, the sender's bridge ID, the cost to the root, and the timers. Be familiar with the following about bridge IDs:<br><br>- The root bridge ID is the bridge ID of the switch with the lowest bridge ID.<br>- The sender's bridge ID is the bridge ID of the switch sending the hello packet.<br>- The sender's root cost is the cost between the sender and the current root.<br>- The timer values include the MAC age timer and forward delay timer.<br>- When a switch has segments advertising the same cost, the port with the lower BID becomes the designated port. All designated ports are set to forwarding.<br>- You can configure the STP topology by manipulating the bridge ID or by changing the port cost configuration of the default bridge ID. |
| Bridge and root port election | The STP election process takes place as follows:<br><br>- Every switch sends out a hello packet listing itself as the root bridge ID with a cost of zero.<br>- As each switch receives a hello packet, it compares its root bridge ID to the root bridge ID listed in the hello packets.<br>- If the listed BID is lower, the switch elects that as the root and forwards the hello packet listing itself as the sender.<br>- Once the root bridge has been elected, its ports enter a forwarding state and continue to send hello packets.<br>- The other switches examine the hello packets and determine which port has the lowest cost to the root. The port with the lowest cost to the root becomes the root port.<br>- The port on each LAN _segment_ with the lowest cost to the root becomes the designated port for that segment.<br>- When the age timer expires, STP starts a new ele                                                                      |





---
# References

 - [[Spanning Tree Protocol]]
 - [[STP Configuration]]